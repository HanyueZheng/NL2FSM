The HI-3110 transmit buffer consists of an eight message <phrase>FIFO</phrase> which allows transmission of up to eight messages. Messages are loaded to the transmit <phrase>FIFO</phrase> via <phrase>SPI</phrase> instruction. The
next message to be<phrase> transmitted</phrase> (or current message trying to gain access to the <phrase>bus</phrase>) is loaded from the <phrase>FIFO</phrase> to the Transmit Buffer.<phrase> This will happen automatically </phrase>if <phrase>TXEN</phrase> or TX1M are<phrase> set</phrase> in CTRL1. If <phrase>the <phrase>bus</phrase> is available, the message is sent</phrase>. The Transmit <phrase>History</phrase> <phrase>FIFO</phrase> can optionally be used by<phrase> the host to keep a record of up to eight successfully<phrase> transmitted</phrase> messages</phrase>. The current transmission <phrase>sequence</phrase> can also be paused by resetting the <phrase>TXEN</phrase> <phrase>bit</phrase> in CTRL1 (or pulling <phrase>TXEN</phrase> pin low).<phrase> In this case, the current message </phrase>will be completed and any remaining messages in the transmit <phrase>FIFO</phrase> will not be<phrase> transmitted</phrase>.
If the current message transmission goes ahead, two things can happen:
a) The message is successful, and the transmit buffer is now ready to receive the next message from the transmit <phrase>FIFO</phrase>.
The transmit <phrase>history</phrase> <phrase>FIFO</phrase> is updated (see below).
b) The message is not successful due to <phrase>lost</phrase> <phrase>arbitration</phrase> or message error.
<phrase>Lost</phrase> <phrase>Arbitration</phrase>:<phrase> If <phrase><phrase>arbitration</phrase> is <phrase>lost</phrase>, the current message stays in the Transmit Buffer for re-transmission</phrase></phrase>.
Message error: Flag <phrase>BUSERR</phrase> is<phrase> set</phrase> in the Interrupt Flag Register. An error frame is sent and an optional hardware interrupt may also <phrase>be generated</phrase> at the <phrase>INT</phrase> pin if enabled in the Interrupt Enable Register (<phrase>bit</phrase> <phrase>BUSERR</phrase>IE = 1). If there is an error, the current message stays in the Transmit Buffer for automatic re-transmission in accordance with the <phrase>CAN</phrase> protocol.

Conditions for entering the Power On Reset:
<phrase>• </phrase><phrase>VBAT</phrase> is below the <phrase>VBAT</phrase>_POD <phrase>AND</phrase> <phrase>VCC</phrase> is below <phrase>VCC</phrase>_UV threshold.
Conditions for leaving the Power On Reset:
<phrase>• </phrase>Once the power supply voltage <phrase>VBAT</phrase> <phrase>OR</phrase> <phrase>VCC</phrase> is within the functional <phrase>range</phrase> the transceiver enters Stand-by Mode within tPON.
<phrase>The internal Power On Reset flag </phrase>will be<phrase> set</phrase>. After <phrase>Power On Reset the TLE9252V enters Stand-by Mode</phrase>.

<phrase>The internal Power On Reset flag </phrase>will be<phrase> set</phrase>. After <phrase>Power On Reset the TLE9252V enters Stand-by Mode</phrase>.

When <phrase>TXBNCTRL</phrase>.<phrase><phrase>TXREQ</phrase></phrase> is<phrase> set</phrase>, the <phrase>TXBNCTRL</phrase>.<phrase><phrase>ABTF</phrase></phrase>, <phrase>TXBNCTRL</phrase>.<phrase><phrase>MLOA</phrase></phrase> and <phrase>TXBNCTRL</phrase>.<phrase><phrase>TXERR</phrase></phrase> <phrase>bits</phrase> will be<phrase> cleared</phrase>.
Setting the <phrase>TXBNCTRL</phrase>.<phrase><phrase>TXREQ</phrase></phrase> <phrase>bit</phrase> does not initiate amessage transmission, it merely <phrase>flags</phrase> a message buffer as ready for transmission.<phrase> Transmission will start </phrase>when <phrase>the device detects that the <phrase>bus</phrase> is available</phrase>. The device will then begin transmission of the highest priority message that is ready. When the <phrase>transmission has completed successfully</phrase> the
<phrase>TXBNCTRL</phrase>.<phrase><phrase>TXREQ</phrase></phrase> <phrase>bit</phrase> will be<phrase> cleared</phrase>, the <phrase>CAN</phrase><phrase>INT</phrase>F.<phrase>TXN</phrase>IF <phrase>bit</phrase> will be<phrase> set</phrase>, and <phrase>an interrupt will be generated</phrase> if the <phrase>CAN</phrase><phrase>INT</phrase><phrase>E</phrase>.<phrase>TXN</phrase>IE <phrase>bit</phrase> is<phrase> set</phrase>. If the message <phrase>transmission fails</phrase>, the <phrase>TXBNCTRL</phrase>.<phrase><phrase>TXREQ</phrase></phrase> will remain<phrase> set</phrase> indicating that the message is still pending for transmission and one of the following condition <phrase>flags</phrase> will be<phrase> set</phrase>. If the message
<phrase>started to transmit</phrase> but <phrase>encountered an error condition</phrase>, the <phrase>TXBNCTRL</phrase>. <phrase><phrase>TXERR</phrase></phrase> and the <phrase>CAN</phrase><phrase>INT</phrase>F.<phrase>MERRF</phrase> <phrase>bits</phrase> will be<phrase> set</phrase> and <phrase>an interrupt will be generated</phrase> on the <phrase>INT</phrase> pin if the <phrase>CAN</phrase><phrase>INT</phrase><phrase>E</phrase>.<phrase>MERRE</phrase> <phrase>bit</phrase> is<phrase> set</phrase>. If the message <phrase>lost</phrase> <phrase>arbitration</phrase> the <phrase>TXBNCTRL</phrase>.<phrase><phrase>MLOA</phrase></phrase> <phrase>bit</phrase> will be
<phrase>set</phrase>.
The <phrase><phrase>MCU</phrase></phrase> can request to abort a message in a specific message buffer by<phrase> clearing the associated TXBnCTRL</phrase>. <phrase><phrase>TXREQ</phrase></phrase> <phrase>bit</phrase>. Also, all pending messages can be requested to be aborted by<phrase> set</phrase>ting the <phrase>CAN</phrase>CTRL. <phrase>ABAT</phrase> <phrase>bit</phrase>. If the <phrase>CAN</phrase>CTRL.<phrase>ABAT</phrase> <phrase>bit</phrase> is<phrase> set</phrase> to abort all pending messages, the user <phrase>MUST</phrase> reset this <phrase>bit</phrase> (typically after the user verifies that all <phrase><phrase>TXREQ</phrase></phrase> <phrase>bits</phrase> have been<phrase> cleared</phrase>) to continue trasmit messages. The <phrase>CAN</phrase>CTRL.<phrase><phrase>ABTF</phrase></phrase> flag will only be<phrase> set</phrase> if the abort was requested via the <phrase>CAN</phrase>CTRL.<phrase>ABAT</phrase> <phrase>bit</phrase>. Aborting a message by resetting the <phrase><phrase>TXREQ</phrase></phrase> <phrase>bit</phrase> does cause the <phrase>ATBF</phrase> <phrase>bit</phrase> to be<phrase> set</phrase>.
